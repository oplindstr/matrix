<div id="Event" class="container-fluid">

  <div class="col-lg-9">

      <p></p>

      <div class="Event EventFields">

          <h2><%= @event.name %></h2>

          <p>
          <strong>Päivä:</strong>
          <%= DateHelper.weekday(@event.starttime) %> <%= DateHelper.standard_date(@event.starttime) %>
          </p>

          <p>
          <strong>Aika:</strong>
          <%= DateHelper.time(@event.starttime)%>
          </p>

          <% if not (@event.location.nil? || @event.location.empty?) %>

            <p>
            <strong>Paikka:</strong>
            <%= @event.location %>
            </p>

          <% end %>

          <% if not (@event.event_type.nil? || @event.event_type.empty?) %>

            <p>
            <strong>Tyyppi:</strong>
            <%= @event.event_type %>
            </p>

          <% end %>

          <% if not (@event.price.nil? || @event.price.empty?) %>

            <p>
            <strong>Hinta:</strong>
            <%= @event.price %> €
            </p>

          <% end %>

          <p>
          <%= @event.descr %>
          </p>

          <% if @event.signup_required %>

            <p>
            <strong>Ilmoittautumisaika:</strong>
            <%= DateHelper.full_date(@event.signup_start) %> - <%= DateHelper.full_date(@event.signup_end) %>
            </p>

            <p>
            <strong>Ilmoittautuminen sitova alkaen:</strong>
            <%= DateHelper.full_date(@event.signup_cancellable_until) %>
            </p>

            <p>
              <strong>Ilmoittautuneita:</strong>
              <%= @event.signups.count %>
              <% if @event.signup_limit %>
                / <%= @event.signup_limit %>
              <% end %>
            </p>

            <% if @event.full %>
                <p>Tapahtuma on täynnä!</p>
            <% end %>

            <% if !@event.empty %>

              <p><%= link_to 'Näytä ilmoittautuneet', event_signups_path(@event.id) %></p>

            <% end %>

            <% if @event.empty and @event.signup_open %>

              <p>Tapahtumaan ei ole vielä ilmoittautunut ketään</p>

            <% end %>

            <% if !@event.members_only %>
              <b>Ulkopuoliset voivat ilmoittautua tapahtumaan</b>
            <% end %>

            <% if !current_user and !@event.members_only and !@event.full and @event.signup_open %>
              <%= render 'signups/form' %>
            <% end %>

            <% if current_user and !@event.user_signed_up(current_user.id) and !@event.full and @event.signup_open %>
                <%= render 'signups/form' %>
            <% end %>

            <% if current_user and @event.user_signed_up(current_user.id) and @event.signup_cancellable %>
              <% if @event_parameters.size > 0 %>
                <%= render 'signups/form' %>
              <% end %>
                <%= button_to 'Peru ilmoittautuminen', @signup, method: :delete, data: { confirm: 'Haluatko varmasti perua ilmoittautumisesi?' } %>
            <% end %>

          <% end %>
      </div>

  </div>

</div>

<% if admin %>

    <%= link_to 'Muokkaa tapahtumaa', edit_event_path(@event) %> |

<% end %>

<%= link_to 'Takaisin', events_path %>
